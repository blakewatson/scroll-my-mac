---
phase: 07-app-icon
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/Contents.json
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_16x16.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_16x16@2x.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_32x32.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_32x32@2x.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_128x128.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_128x128@2x.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_256x256.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_256x256@2x.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512.png
  - ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512@2x.png
  - ScrollMyMac.xcodeproj/project.pbxproj
autonomous: false
requirements:
  - ICON-01
  - ICON-02

must_haves:
  truths:
    - "The app icon appears in the Dock when the app is running (not the default AppKit icon)"
    - "The app icon appears in Finder when browsing to the built .app"
    - "The app icon appears in the app switcher (Cmd+Tab)"
  artifacts:
    - path: "ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/Contents.json"
      provides: "Asset catalog icon set manifest with all required macOS sizes"
      contains: "AppIcon"
    - path: "ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512@2x.png"
      provides: "1024x1024 icon (largest required size)"
    - path: "ScrollMyMac.xcodeproj/project.pbxproj"
      provides: "Xcode project with Assets.xcassets registered in Resources build phase"
      contains: "Assets.xcassets"
  key_links:
    - from: "ScrollMyMac.xcodeproj/project.pbxproj"
      to: "ScrollMyMac/Resources/Assets.xcassets"
      via: "PBXResourcesBuildPhase referencing asset catalog"
      pattern: "Assets.xcassets"
---

<objective>
Generate a complete macOS AppIcon.appiconset from the source image and wire it into the Xcode project so the app displays its custom icon everywhere macOS shows it.

Purpose: The app currently uses the default macOS app icon. A custom icon is needed for a professional, recognizable presence in the Dock, Finder, Spotlight, and app switcher before distribution.
Output: Complete AppIcon.appiconset with all required sizes, asset catalog registered in Xcode project, verified build.
</objective>

<execution_context>
@/Users/blakewatson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/blakewatson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@ScrollMyMac.xcodeproj/project.pbxproj
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate AppIcon.appiconset from source image</name>
  <files>
    ScrollMyMac/Resources/Assets.xcassets/Contents.json
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/Contents.json
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_16x16.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_16x16@2x.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_32x32.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_32x32@2x.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_128x128.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_128x128@2x.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_256x256.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_256x256@2x.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512.png
    ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512@2x.png
  </files>
  <action>
    Create the asset catalog directory structure and generate all required icon sizes from `raw_icon_img.png` (1024x1024 source at project root).

    1. Create directory: `ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/`

    2. Create `ScrollMyMac/Resources/Assets.xcassets/Contents.json` (top-level asset catalog manifest):
       ```json
       {
         "info": {
           "author": "xcode",
           "version": 1
         }
       }
       ```

    3. Use `sips` (macOS built-in) to resize `raw_icon_img.png` to each required size. The macOS AppIcon.appiconset requires these 10 sizes (5 point sizes x 2 scales):
       - 16x16 (16pt @1x)
       - 32x32 (16pt @2x)
       - 32x32 (32pt @1x)
       - 64x64 (32pt @2x)
       - 128x128 (128pt @1x)
       - 256x256 (128pt @2x)
       - 256x256 (256pt @1x)
       - 512x512 (256pt @2x)
       - 512x512 (512pt @1x)
       - 1024x1024 (512pt @2x)

       Use filenames: `icon_16x16.png`, `icon_16x16@2x.png`, `icon_32x32.png`, `icon_32x32@2x.png`, `icon_128x128.png`, `icon_128x128@2x.png`, `icon_256x256.png`, `icon_256x256@2x.png`, `icon_512x512.png`, `icon_512x512@2x.png`.

       For each size, copy source then resize:
       ```bash
       cp raw_icon_img.png ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512@2x.png
       sips -z 512 512 ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512.png
       # etc.
       ```

    4. Create `ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/Contents.json` with the standard macOS icon set manifest referencing all 10 images with correct idiom ("mac"), size, and scale values.
  </action>
  <verify>
    - `ls ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/` shows 11 files (10 PNGs + Contents.json)
    - `sips -g pixelWidth -g pixelHeight ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_512x512@2x.png` shows 1024x1024
    - `sips -g pixelWidth -g pixelHeight ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/icon_16x16.png` shows 16x16
    - `cat ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/Contents.json` is valid JSON with 10 image entries
  </verify>
  <done>All 10 required macOS icon sizes exist as PNGs generated from the source image, with a valid Contents.json manifest</done>
</task>

<task type="auto">
  <name>Task 2: Register asset catalog in Xcode project and verify build</name>
  <files>ScrollMyMac.xcodeproj/project.pbxproj</files>
  <action>
    The Xcode project already has `ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon` in build settings but lacks the actual asset catalog file reference and a Resources build phase. Update `project.pbxproj` to add:

    1. **PBXFileReference** for `Assets.xcassets`:
       Add a new file reference entry (use ID `A20000010000000000000020`):
       ```
       A20000010000000000000020 /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
       ```

    2. **PBXGroup** — Add `Assets.xcassets` to the Resources group (`A40000010000000000000008`):
       Add `A20000010000000000000020 /* Assets.xcassets */,` to the children array of the Resources group, alongside the existing `Info.plist` entry.

    3. **PBXBuildFile** for the Resources build phase:
       Add entry (use ID `A10000010000000000000017`):
       ```
       A10000010000000000000017 /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = A20000010000000000000020 /* Assets.xcassets */; };
       ```

    4. **PBXResourcesBuildPhase** — Create new section (use ID `A30000010000000000000002`):
       ```
       A30000010000000000000002 /* Resources */ = {
           isa = PBXResourcesBuildPhase;
           buildActionMask = 2147483647;
           files = (
               A10000010000000000000017 /* Assets.xcassets in Resources */,
           );
           runOnlyForDeploymentPostprocessing = 0;
       };
       ```
       Add this as a new section block. If `/* Begin PBXResourcesBuildPhase section */` doesn't exist, add the full section after `/* End PBXNativeTarget section */`.

    5. **PBXNativeTarget** — Add the Resources build phase to the target's `buildPhases` array:
       Add `A30000010000000000000002 /* Resources */,` after `A30000010000000000000001 /* Frameworks */,` in the buildPhases list of target `A50000010000000000000001`.

    6. Verify the project builds: `xcodebuild -project ScrollMyMac.xcodeproj -scheme ScrollMyMac -configuration Debug build 2>&1 | tail -5`
  </action>
  <verify>
    - `grep "Assets.xcassets" ScrollMyMac.xcodeproj/project.pbxproj` returns matches for PBXFileReference, PBXBuildFile, and PBXGroup
    - `grep "PBXResourcesBuildPhase" ScrollMyMac.xcodeproj/project.pbxproj` returns matches
    - `xcodebuild -project ScrollMyMac.xcodeproj -scheme ScrollMyMac -configuration Debug build` succeeds (exit code 0)
  </verify>
  <done>Asset catalog is registered in the Xcode project with a Resources build phase, and the project builds successfully with the custom icon</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify icon appears correctly in macOS</name>
  <what-built>Complete AppIcon.appiconset with all required macOS sizes, wired into the Xcode project build.</what-built>
  <how-to-verify>
    1. Build and run the app from Xcode (Product > Run or Cmd+R)
    2. Check the Dock — the app icon should show the custom icon (not the default macOS app icon)
    3. Use Cmd+Tab to open the app switcher — the custom icon should appear
    4. In Finder, navigate to the build output (or the .app in the DerivedData folder) — the custom icon should appear
    5. If the icon looks wrong at any size, describe the issue
  </how-to-verify>
  <resume-signal>Type "approved" if the icon appears correctly everywhere, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
- All 10 macOS icon sizes exist in `ScrollMyMac/Resources/Assets.xcassets/AppIcon.appiconset/`
- `Contents.json` references all 10 images with correct idiom, size, and scale
- `project.pbxproj` has Assets.xcassets in PBXFileReference, PBXGroup (Resources), PBXBuildFile, and PBXResourcesBuildPhase
- Project builds successfully with `xcodebuild`
- Icon appears in Dock, Finder, and app switcher (human verified)
</verification>

<success_criteria>
- App displays custom icon in Dock when running
- App displays custom icon in Finder
- App displays custom icon in app switcher (Cmd+Tab)
- Project builds cleanly with no asset catalog warnings
</success_criteria>

<output>
After completion, create `.planning/phases/07-app-icon/07-01-SUMMARY.md`
</output>
